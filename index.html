<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8623524185914819" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POPCHAT - Random Chat with Strangers</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="connection-status" id="connection-status"></div>
    
    <!-- QR Code Modal -->
    <div id="qr-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Support POPCHAT</h2>
            <p>Scan the QR code to make a donation</p>
            <div class="qr-code-container">
                <img src="qr-code.jpg" alt="Donation QR Code" class="qr-code" onerror="this.style.display='none'">
                <div class="qr-placeholder" id="qr-placeholder">
                    <i class="fas fa-qrcode"></i>
                    <p>QR Code Image</p>
                </div>
            </div>
            <p class="donation-note">Your support helps keep POPCHAT running and improving!</p>
        </div>
    </div>

    <!-- Incoming Call Modal -->
    <div id="incoming-call-modal" class="modal">
        <div class="modal-content call-modal">
            <div class="call-notification">
                <div class="call-avatar-notification">ðŸ‘¤</div>
                <h3>Incoming Voice Call</h3>
                <p id="caller-name">Someone is calling you</p>
                <div class="call-notification-buttons">
                    <button class="btn accept-call-btn" id="accept-call-btn">
                        <i class="fas fa-phone"></i> Accept
                    </button>
                    <button class="btn reject-call-btn" id="reject-call-btn">
                        <i class="fas fa-phone-slash"></i> Reject
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Entrance Page -->
        <div class="page active" id="entrance-page">
            <div class="logo">
                <i class="fas fa-comments"></i> POPCHAT
            </div>
            <h1>Randomly Connect to Strangers</h1>
            <div class="username-container">
                <input type="text" id="username-input" class="username-input" placeholder="Enter your username" maxlength="20">
                <button class="btn swipe-btn" id="swipe-btn">
                     Enter Chat 
                </button>
            </div>
            <div class="active-count" id="entrance-active-count">0 Active Now</div>
        </div>
        
        <!-- Dashboard Page -->
        <div class="page" id="dashboard-page">
            <h1>Welcome, <span id="dashboard-username"></span>!</h1>
            <p>Ready to start chatting with random people?</p>
            <button class="btn" id="start-chat-btn">
                <i class="fas fa-search"></i> Find Chat Partner
            </button>
        </div>
        
        <!-- Waiting Page -->
        <div class="page" id="waiting-page">
            <h1 id="waiting-text" class="waiting-text">Hi <span id="username-display"></span>, Finding someone for you...</h1>
            <div class="loader"></div>
            <div class="waiting-progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div class="waiting-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
        
        <!-- Chat Page -->
        <div class="page" id="chat-page">
            <div class="chat-container">
                <div class="chat-header">
                    <div class="user-info">
                        <div class="user-avatar">ðŸ‘¤</div>
                        <span id="partner-name">Connecting...</span>
                        <span class="online-dot"></span>
                    </div>
                    <div class="menu-container">
                        <button class="menu-btn"><i class="fas fa-ellipsis-v"></i></button>
                        <div class="menu-content">
                            <a id="voice-call-btn"><i class="fas fa-phone"></i> Voice Call</a>
                        </div>
                    </div>
                </div>
                
                <div id="reply-indicator" class="reply-indicator" style="display: none;">
                    <div class="reply-content">
                        <div class="reply-header">
                            <span class="reply-label">Replying to</span>
                            <span id="reply-username" class="reply-username"></span>
                        </div>
                        <p id="reply-text" class="reply-text"></p>
                    </div>
                    <div class="reply-close" id="close-reply">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <div class="system-message">
                        <i class="fas fa-info-circle"></i> Welcome to POPCHAT! You'll be connected shortly.
                    </div>
                    <!-- Typing indicator will be added here -->
                    <div class="typing-indicator" id="typing-indicator">
                        <span id="typing-text">Partner is typing</span>
                        <span class="typing-dots">
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                            <span class="typing-dot"></span>
                        </span>
                    </div>
                </div>
                
                <div class="chat-input-area">
                    <button class="icon-btn leave-btn" id="leave-btn" title="Leave chat">
                        <i class="fas fa-times"></i>
                    </button>
                    
                    <div class="input-container">
                        <textarea 
                            class="chat-input" 
                            id="message-input" 
                            placeholder="Type message here..."
                            rows="1"
                            maxlength="500"
                        ></textarea>
                    </div>
                    
                    <button class="icon-btn send-btn" id="send-btn" title="Send message">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Call Page -->
        <div class="page" id="call-page">
            <div class="call-container">
                <div class="call-header">
                    <div class="user-info">
                        <div class="user-avatar">ðŸ‘¤</div>
                        <span id="call-partner-name">Partner</span>
                        <span class="online-dot"></span>
                    </div>
                </div>
                
                <div class="call-status-container">
                    <div class="call-avatar-large">
                        ðŸ‘¤
                    </div>
                    <div class="call-status" id="call-status">Calling...</div>
                    <div class="call-timer" id="call-timer">00:00</div>
                </div>
                
                <div class="call-controls">
                    <button class="call-btn back-chat-btn" id="back-chat-btn" title="Back to Chat">
                        <i class="fas fa-comment"></i>
                        <span>Back Chat</span>
                    </button>
                    
                    <button class="call-btn hangup-btn" id="hangup-btn" title="Hang Up">
                        <i class="fas fa-phone-slash"></i>
                        <span>Hang Up</span>
                    </button>
                    
                    <button class="call-btn mute-btn" id="mute-btn" title="Mute">
                        <i class="fas fa-microphone"></i>
                        <span>Mute</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Disconnected Page -->
        <div class="page" id="disconnected-page">
            <div class="disconnected-state">
                <h1>Conversation Ended</h1>
                <p id="left-message">Your partner has left the chat.</p>
                <div class="disconnected-buttons">
                    <button class="btn" id="rematch-btn">
                        <i class="fas fa-redo"></i> Find New Partner
                    </button>
                    <button class="btn" id="home-btn">
                        <i class="fas fa-home"></i> Back to Home
                    </button>
                </div>
                <button class="btn donation-btn" id="donation-btn">
                    <i class="fas fa-heart"></i> Support with Donation
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>